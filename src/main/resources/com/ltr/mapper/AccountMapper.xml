<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ltr.mapper.AccountMapper">

    <!-- 查询一个网站的所有账号（包括条件查询） -->
    <select id="getAccount" resultType="com.ltr.pojo.Account">
        select aid,web_account_p1,web_account_p2,web_account_p3,web_password,notes from accounts where wid = #{wid}
        <if test="webAccountP1 != null and webAccountP1 != ''"> and web_account_p1 = #{webAccountP1}</if>
    </select>

    <!-- 按aid查询账号 -->
    <select id="getAccountByAid" resultType="com.ltr.pojo.Account">
        select aid,web_account_p1,web_account_p2,web_account_p3,web_password from accounts where aid = #{aid}
    </select>

    <!-- 添加账号 -->
    <insert id="addAccount" parameterType="com.ltr.pojo.Account">
        insert into accounts(wid,web_account_p1,web_account_p2,web_account_p3,web_password,notes) VALUES (#{wid},#{webAccountP1},#{webAccountP2},#{webAccountP3},#{webPassword},#{notes})
    </insert>

    <!-- 按aid删除账号 -->
    <delete id="deleteAccountByAid">
        delete from accounts where aid = #{aid}
    </delete>

    <!-- 按wid删除账号 -->
    <delete id="deleteAccountByWid">
        delete from accounts where wid = #{wid}
    </delete>

    <!-- 按uid删除账号 -->
    <delete id="deleteAccountByUid">
        delete from accounts where wid = (
            select wid from webs where uid = #{uid}
        )
    </delete>

    <!-- 修改账号 -->
    <update id="modifyAccount" parameterType="com.ltr.pojo.Account">
        update accounts set web_account_p1 = #{webAccountP1}, web_account_p2 = #{webAccountP2}, web_account_p3 = #{webAccountP3}, web_password = #{webPassword} where aid = #{aid}
    </update>

</mapper>